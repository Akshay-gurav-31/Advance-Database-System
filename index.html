<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostgreSQL Compiler & Sample Code</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f3f4f6;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --accent-color: #2563eb;
            --accent-hover: #1d4ed8;
            --border-color: #e5e7eb;
            --code-bg: #1f2937;
            --code-text: #e5e7eb;
            --success-color: #10b981;
            --header-height: 64px;
            --sidebar-width: 280px;
        }

        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent-color: #3b82f6;
            --accent-hover: #60a5fa;
            --border-color: #334155;
            --code-bg: #020617;
            --code-text: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            height: 100dvh;
            /* Dynamic viewport height for mobile */
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s;
            overflow: hidden;
        }

        /* Header */
        header {
            height: var(--header-height);
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            flex-shrink: 0;
            z-index: 30;
            position: relative;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .menu-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-btn:hover {
            background-color: var(--bg-primary);
        }

        .logo {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background-color: var(--bg-primary);
            border-color: var(--accent-color);
        }

        /* Main Layout */
        main {
            flex: 1;
            display: flex;
            overflow: hidden;
            position: relative;
            width: 100%;
        }

        /* Sidebar */
        aside {
            width: var(--sidebar-width);
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 20;
            height: 100%;
        }

        /* Desktop: Sidebar visible by default, pushes content */
        @media (min-width: 769px) {
            aside {
                transform: translateX(0);
            }

            aside.closed {
                transform: translateX(-100%);
            }

            .content-area {
                margin-left: var(--sidebar-width);
            }

            .content-area.expanded {
                margin-left: 0;
            }
        }

        /* Mobile: Sidebar hidden by default, overlays content */
        @media (max-width: 768px) {
            aside {
                transform: translateX(-100%);
                box-shadow: 4px 0 24px rgba(0, 0, 0, 0.1);
                width: 85%;
                /* Slightly wider on mobile */
                max-width: 300px;
            }

            aside.open {
                transform: translateX(0);
            }

            .content-area {
                margin-left: 0 !important;
                /* Always full width on mobile */
                width: 100%;
            }

            /* Overlay backdrop for mobile */
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: var(--header-height);
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 15;
                backdrop-filter: blur(2px);
            }

            .sidebar-overlay.active {
                display: block;
            }
        }

        .sidebar-header {
            padding: 16px;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            font-weight: 600;
            border-bottom: 1px solid var(--border-color);
        }

        .file-list {
            list-style: none;
            padding-bottom: 20px;
        }

        .file-item {
            padding: 14px 16px;
            /* Larger touch target */
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--text-secondary);
            transition: all 0.2s;
            border-left: 3px solid transparent;
            font-size: 0.95rem;
        }

        .file-item:hover {
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        .file-item.active {
            background-color: var(--bg-primary);
            color: var(--accent-color);
            border-left-color: var(--accent-color);
            font-weight: 600;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background-color: var(--bg-primary);
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            flex-shrink: 0;
            overflow-x: auto;
            /* Allow scrolling tabs on very small screens */
        }

        .tab {
            padding: 14px 24px;
            cursor: pointer;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }

        .view-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: none;
            -webkit-overflow-scrolling: touch;
            /* Smooth scrolling on iOS */
        }

        .view-container.active {
            display: block;
        }

        /* Code Viewer */
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .file-title {
            font-size: 1.1rem;
            font-weight: 600;
            word-break: break-word;
        }

        .copy-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }

        .copy-btn:active {
            transform: scale(0.98);
        }

        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.85rem;
            /* Slightly smaller for mobile readability */
            line-height: 1.6;
            border: 1px solid var(--border-color);
            white-space: pre;
            /* Ensure scrolling */
            min-height: 200px;
        }

        /* SQL Runner */
        .runner-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 16px;
        }

        .sql-input {
            width: 100%;
            height: 200px;
            background-color: var(--code-bg);
            color: var(--code-text);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9rem;
            resize: none;
            flex-shrink: 0;
        }

        .sql-input:focus {
            outline: 2px solid var(--accent-color);
            border-color: transparent;
        }

        .run-btn {
            align-self: flex-start;
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 12px 24px;
            /* Larger touch target */
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: opacity 0.2s;
            width: 100%;
            /* Full width on mobile */
        }

        @media (min-width: 600px) {
            .run-btn {
                width: auto;
            }
        }

        .output-area {
            flex: 1;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            font-family: monospace;
            overflow-y: auto;
            min-height: 150px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }
    </style>
</head>

<body>

    <header>
        <div class="header-left">
            <button class="menu-btn" id="menuBtn" title="Toggle Sidebar">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12" />
                    <line x1="3" y1="6" x2="21" y2="6" />
                    <line x1="3" y1="18" x2="21" y2="18" />
                </svg>
            </button>
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m5 12 7-7 7 7" />
                    <path d="M12 19V5" />
                </svg>
                PostgreSQL Compiler
            </div>
        </div>
        <button class="theme-toggle" id="themeToggle" title="Toggle Theme">
            <!-- Sun Icon (for light mode) -->
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                style="display: none;">
                <circle cx="12" cy="12" r="5" />
                <line x1="12" y1="1" x2="12" y2="3" />
                <line x1="12" y1="21" x2="12" y2="23" />
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                <line x1="1" y1="12" x2="3" y2="12" />
                <line x1="21" y1="12" x2="23" y2="12" />
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
            </svg>
            <!-- Moon Icon (for dark mode) -->
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
            </svg>
        </button>
    </header>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <main>
        <aside id="sidebar">
            <div class="sidebar-header">Sample Code</div>
            <ul class="file-list" id="fileList">
                <!-- Files will be injected here -->
            </ul>
        </aside>

        <div class="content-area" id="contentArea">
            <div class="tabs">
                <div class="tab active" data-target="viewer">Code Viewer</div>
                <div class="tab" data-target="runner">SQL Runner</div>
            </div>

            <!-- Code Viewer Section -->
            <div id="viewer" class="view-container active">
                <div class="code-header">
                    <div class="file-title" id="currentFileName">Select a file...</div>
                    <button class="copy-btn" id="copyBtn" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                        Copy Code
                    </button>
                </div>
                <pre id="codeDisplay">Select a file from the sidebar to view its content.</pre>
            </div>

            <!-- SQL Runner Section -->
            <div id="runner" class="view-container">
                <div class="runner-container">
                    <textarea class="sql-input" id="sqlInput" placeholder="Enter your SQL query here..."></textarea>
                    <button class="run-btn" id="runBtn">Run Query</button>
                    <div class="output-area" id="outputArea">
                        <div class="output-placeholder">Query results will appear here...</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Embedded Data from ADS Folder
        const filesData = {
            "Bloom Join.txt": `-- ORACLE support

-- Create Students table
CREATE TABLE Students (
    student_id INT PRIMARY KEY,
    name VARCHAR(50)
);

-- Create Enrollment table
CREATE TABLE Enrollment (
    course_id INT,
    student_id INT
);

-- Insert sample students
INSERT INTO Students VALUES
(1, 'Amit'),
(2, 'Riya'),
(3, 'Kunal'),
(4, 'Sanjay');

-- Insert enrollment records
INSERT INTO Enrollment VALUES
(101, 1),
(102, 3),
(103, 1);

-- Get unique student IDs who enrolled
SELECT DISTINCT student_id FROM Enrollment;

-- Get students who enrolled (filtering using subquery)
SELECT *
FROM Students
WHERE student_id IN (SELECT DISTINCT student_id FROM Enrollment);

-- Join Students + Enrollment (important join)
SELECT s.student_id, s.name, e.course_id
FROM Students s
JOIN Enrollment e
ON s.student_id = e.student_id;`,
            "Concurrency Control.txt": `-- ORACLE support

-- Create sample table
CREATE TABLE employees (
    emp_id     NUMBER PRIMARY KEY,   -- Primary key
    emp_name   VARCHAR2(50),
    salary     NUMBER
);

-- Insert sample data
INSERT INTO employees VALUES (1, 'Ravi', 25000);
INSERT INTO employees VALUES (2, 'Sneha', 30000);
INSERT INTO employees VALUES (3, 'Amit', 28000);
INSERT INTO employees VALUES (4, 'Kiran', 35000);

COMMIT;  -- Save changes

-- Create procedure to increase salary
CREATE OR REPLACE PROCEDURE increase_salary(
    p_emp_id      IN  NUMBER,        -- Employee ID
    p_percentage  IN  NUMBER         -- Raise %
)
AS
BEGIN
    UPDATE employees
    SET salary = salary + (salary * p_percentage / 100)
    WHERE emp_id = p_emp_id;

    DBMS_OUTPUT.PUT_LINE('Salary updated for Employee ID: ' || p_emp_id);  -- Oracle output
END;
/

-- Execute the procedure
BEGIN
    increase_salary(2, 10);   -- Increase Sneha's salary by 10%
END;
/

-- Display table after update
SELECT * FROM employees;

-- Show updated salary for one employee
SELECT emp_name, salary
FROM employees
WHERE emp_id = 2;`,
            "Fragmentation.txt": `-- ORACLE support

-- Create main Employees table
CREATE TABLE Employees (
    emp_id INT PRIMARY KEY,
    name VARCHAR(50),
    dept_id INT,
    salary INT,
    city VARCHAR(50)
);

-- Insert sample data
INSERT INTO Employees VALUES
(1, 'Amit', 10, 50000, 'Pune'),
(2, 'Riya', 20, 60000, 'Mumbai'),
(3, 'Kunal', 10, 55000, 'Pune'),
(4, 'Sanjay', 30, 65000, 'Nashik'),
(5, 'Meera', 20, 62000, 'Mumbai'),
(6, 'Teena', 10, 70000, 'Pune');

-- Horizontal Fragmentation (Row-wise split)

-- Employees from Pune
CREATE TABLE Emp_Pune AS
SELECT * FROM Employees
WHERE city = 'Pune';

-- Employees from Mumbai
CREATE TABLE Emp_Mumbai AS
SELECT * FROM Employees
WHERE city = 'Mumbai';

-- Employees from other cities
CREATE TABLE Emp_Others AS
SELECT * FROM Employees
WHERE city NOT IN ('Pune', 'Mumbai');

SELECT * FROM Emp_Pune;
SELECT * FROM Emp_Mumbai;
SELECT * FROM Emp_Others;

-- Vertical Fragmentation (Column-wise split)

-- Basic employee info
CREATE TABLE Emp_Basic AS
SELECT emp_id, name, dept_id
FROM Employees;

-- Salary information
CREATE TABLE Emp_Salary AS
SELECT emp_id, salary
FROM Employees;

-- Location information
CREATE TABLE Emp_Location AS
SELECT emp_id, city
FROM Employees;

SELECT * FROM Emp_Basic;
SELECT * FROM Emp_Salary;
SELECT * FROM Emp_Location;

-- Prove vertical fragmentation correctness (Reconstruction)
SELECT b.emp_id, b.name, b.dept_id, s.salary, l.city
FROM Emp_Basic b
JOIN Emp_Salary s ON b.emp_id = s.emp_id
JOIN Emp_Location l ON b.emp_id = l.emp_id;`,
            "Hash Join.txt": `-- ORACLE support

-- Create Customers table
CREATE TABLE Customers (
    customer_id INT PRIMARY KEY,
    name VARCHAR(50),
    city VARCHAR(50)
);

-- Create Orders table
CREATE TABLE Orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    amount INT
);

-- Insert sample customers
INSERT INTO Customers VALUES
(1, 'Amit', 'Pune'),
(2, 'Riya', 'Mumbai'),
(3, 'Kunal', 'Nashik');

-- Insert sample orders
INSERT INTO Orders VALUES
(101, 1, 500),
(102, 1, 900),
(103, 2, 700),
(104, 3, 1200);

-- Join Orders with Customers (important join)
SELECT 
    o.order_id,
    o.amount,
    c.name,
    c.city
FROM Orders o
JOIN Customers c
ON o.customer_id = c.customer_id;`,
            "OLAP quries.txt": `-- ORACLE support

-- Create sample table
CREATE TABLE employees2 (
    emp_id     NUMBER PRIMARY KEY,
    emp_name   VARCHAR2(50),
    monthly_salary NUMBER
);

-- Insert sample data
INSERT INTO employees2 VALUES (1, 'Ravi', 25000);
INSERT INTO employees2 VALUES (2, 'Sneha', 30000);
INSERT INTO employees2 VALUES (3, 'Amit', 28000);
INSERT INTO employees2 VALUES (4, 'Kiran', 35000);

COMMIT;

-- Create function to calculate annual salary
CREATE OR REPLACE FUNCTION get_annual_salary(
    p_emp_id IN NUMBER
)
RETURN NUMBER
AS
    v_annual_salary NUMBER;
BEGIN
    SELECT monthly_salary * 12
    INTO v_annual_salary
    FROM employees2
    WHERE emp_id = p_emp_id;

    RETURN v_annual_salary;
END;
/

-- Call function using SELECT for all employees
SELECT 
    emp_name,
    monthly_salary,
    get_annual_salary(emp_id) AS annual_salary
FROM employees2;

-- Call function for one employee (Oracle uses DUAL)
SELECT get_annual_salary(2) AS sneha_annual_salary 
FROM dual;`,
            "Parallel J_S_A.txt": `-- ORACLE support

-- Create Employees table
CREATE TABLE Employees (
    emp_id INT PRIMARY KEY,
    name VARCHAR2(50),
    dept_id INT,
    salary INT
);

-- Create Departments table
CREATE TABLE Departments (
    dept_id INT PRIMARY KEY,
    dept_name VARCHAR2(50)
);

-- Insert employee records
INSERT INTO Employees VALUES
(1, 'Amit', 10, 50000),
(2, 'Riya', 20, 55000),
(3, 'Kunal', 10, 60000),
(4, 'Sanjay', 30, 65000),
(5, 'Mira', 30, 70000),
(6, 'Teena', 20, 52000);

-- Insert department records
INSERT INTO Departments VALUES
(10, 'HR'),
(20, 'Finance'),
(30, 'IT');

-- Aggregation with Oracle Parallel Hint (PostgreSQL ignores it)
SELECT /*+ PARALLEL(Employees, 4) */
       dept_id,
       COUNT(*) AS total_employees,
       AVG(salary) AS avg_salary
FROM Employees
GROUP BY dept_id
ORDER BY dept_id;

-- Select all employees ordered by salary
SELECT /*+ PARALLEL(Employees, 4) */
       *
FROM Employees
ORDER BY salary;

-- Join Employees with Departments (parallel hint applied)
SELECT /*+ PARALLEL(4) */
       e.emp_id,
       e.name,
       e.salary,
       d.dept_name
FROM Employees e
JOIN Departments d
ON e.dept_id = d.dept_id
ORDER BY e.emp_id;`,
            "Semi Join.txt": `-- ORACLE support

-- Create Employees table
CREATE TABLE Employees (
    emp_id INT PRIMARY KEY,
    name VARCHAR(50)
);

-- Create Projects table
CREATE TABLE Projects (
    proj_id INT PRIMARY KEY,
    emp_id INT
);

-- Insert employee data
INSERT INTO Employees VALUES
(1, 'Amit'),
(2, 'Riya'),
(3, 'Kunal'),
(4, 'Sanjay');

-- Insert project assignments
INSERT INTO Projects VALUES
(101, 1),
(102, 3);

-- Select employees who have at least one project (EXISTS subquery)
SELECT 
    e.emp_id, 
    e.name
FROM Employees e
WHERE EXISTS (
    SELECT 1
    FROM Projects p
    WHERE p.emp_id = e.emp_id
);`,
            "Structured Datatype of ORDBMS.txt": `-- ORACLE support

-- Create Oracle OBJECT type
CREATE TYPE Address AS OBJECT (
    street  VARCHAR2(50),
    city    VARCHAR2(30),
    pincode NUMBER
);
/

-- Create table using object type
CREATE TABLE Person (
    person_id INT PRIMARY KEY,
    name      VARCHAR2(50),
    addr      Address
);

-- Insert records using object constructor
INSERT INTO Person VALUES
(1, 'Amit', Address('MG Road', 'Pune', 411001));

INSERT INTO Person VALUES
(2, 'Riya', Address('FC Road', 'Mumbai', 400001));

INSERT INTO Person VALUES
(3, 'Kunal', Address('Camp', 'Nashik', 422001));

-- Display full object (Oracle shows nested structure)
SELECT * FROM Person;

-- Access individual attributes of the object
SELECT 
    p.person_id,
    p.name,
    p.addr.street   AS street,
    p.addr.city     AS city,
    p.addr.pincode  AS pincode
FROM Person p;`,
            "Two-Phase Commit.txt": `-- ORACLE support

-- Create tables (Site A)
CREATE TABLE Accounts_A (
    acc_no NUMBER PRIMARY KEY,
    balance NUMBER
);

-- Create tables (Site B)
CREATE TABLE Accounts_B (
    acc_no NUMBER PRIMARY KEY,
    balance NUMBER
);

-- Insert initial data
INSERT INTO Accounts_A VALUES (101, 5000);
INSERT INTO Accounts_B VALUES (201, 8000);

COMMIT;

-- Begin distributed transaction
-- (Oracle automatically handles Prepare + Commit phases internally)

BEGIN
    -- Site A update
    UPDATE Accounts_A
    SET balance = balance - 1000
    WHERE acc_no = 101;

    -- Site B update
    UPDATE Accounts_B
    SET balance = balance - 1000
    WHERE acc_no = 201;

    -- Oracle performs internal 2PC here
    COMMIT;
END;
/

-- Rollback version (only if needed)
BEGIN
    ROLLBACK;
END;
/

-- Final verification
SELECT * FROM Accounts_A;
SELECT * FROM Accounts_B;`,
            "merge join.txt": `-- ORACLE support

-- Create Employees table
CREATE TABLE Employees (
    emp_id INT PRIMARY KEY,
    name VARCHAR(50),
    dept_id INT
);

-- Create Departments table
CREATE TABLE Departments (
    dept_id INT PRIMARY KEY,
    dept_name VARCHAR(50)
);

-- Insert employee records
INSERT INTO Employees VALUES
(1, 'Amit', 10),
(2, 'Riya', 20),
(3, 'Sanjay', 10),
(4, 'Kiran', 30);

-- Insert department records
INSERT INTO Departments VALUES
(10, 'HR'),
(20, 'Finance'),
(30, 'IT');

-- View Employees table
SELECT * 
FROM Employees 
ORDER BY dept_id;

-- View Departments table
SELECT * 
FROM Departments 
ORDER BY dept_id;

-- Join Employees with Departments
SELECT 
    e.emp_id,
    e.name,
    d.dept_name
FROM Employees e
JOIN Departments d
ON e.dept_id = d.dept_id
ORDER BY e.dept_id;`
        };

        // DOM Elements
        const fileList = document.getElementById('fileList');
        const codeDisplay = document.getElementById('codeDisplay');
        const currentFileName = document.getElementById('currentFileName');
        const copyBtn = document.getElementById('copyBtn');
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const tabs = document.querySelectorAll('.tab');
        const views = document.querySelectorAll('.view-container');
        const runBtn = document.getElementById('runBtn');
        const sqlInput = document.getElementById('sqlInput');
        const outputArea = document.getElementById('outputArea');
        const menuBtn = document.getElementById('menuBtn');
        const sidebar = document.getElementById('sidebar');
        const contentArea = document.getElementById('contentArea');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');

        // Initialize File List
        Object.keys(filesData).forEach(filename => {
            const li = document.createElement('li');
            li.className = 'file-item';
            li.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>
            ${filename}
        `;
            li.addEventListener('click', () => loadFile(filename, li));
            fileList.appendChild(li);
        });

        // Load File Function
        function loadFile(filename, element) {
            // Update Active State
            document.querySelectorAll('.file-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');

            // Update Content
            currentFileName.textContent = filename;
            codeDisplay.textContent = filesData[filename];
            copyBtn.style.display = 'flex';

            // Switch to Viewer Tab if not active
            switchTab('viewer');

            // Close sidebar on mobile after selection
            if (window.innerWidth <= 768) {
                closeSidebar();
            }
        }

        // Copy Functionality
        copyBtn.addEventListener('click', () => {
            const code = codeDisplay.textContent;
            navigator.clipboard.writeText(code).then(() => {
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                Copied!
            `;
                copyBtn.classList.add('copied');

                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.classList.remove('copied');
                }, 2000);
            });
        });

        // Theme Toggle
        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);

            if (newTheme === 'dark') {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            } else {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            }
        });

        // Sidebar Toggle Logic
        function toggleSidebar() {
            if (window.innerWidth > 768) {
                // Desktop: Toggle closed class
                sidebar.classList.toggle('closed');
                contentArea.classList.toggle('expanded');
            } else {
                // Mobile: Toggle open class and overlay
                sidebar.classList.toggle('open');
                sidebarOverlay.classList.toggle('active');
            }
        }

        function closeSidebar() {
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('open');
                sidebarOverlay.classList.remove('active');
            }
        }

        menuBtn.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);

        // Tab Switching
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = tab.getAttribute('data-target');
                switchTab(target);
            });
        });

        function switchTab(targetId) {
            tabs.forEach(t => {
                if (t.getAttribute('data-target') === targetId) {
                    t.classList.add('active');
                } else {
                    t.classList.remove('active');
                }
            });

            views.forEach(v => {
                if (v.id === targetId) {
                    v.classList.add('active');
                } else {
                    v.classList.remove('active');
                }
            });
        }

        // SQL Runner Simulation
        runBtn.addEventListener('click', () => {
            const query = sqlInput.value.trim();
            if (!query) return;

            outputArea.innerHTML = '<div style="color: var(--text-secondary);">Executing query...</div>';

            setTimeout(() => {
                const timestamp = new Date().toLocaleTimeString();
                outputArea.innerHTML = `
                <div style="color: var(--success-color); margin-bottom: 8px;">
                    <strong>âœ“ Query executed successfully</strong> at ${timestamp}
                </div>
                <div style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 16px;">
                    0 rows affected. (Simulation)
                </div>
                <div style="background: var(--code-bg); padding: 8px; border-radius: 4px; border: 1px solid var(--border-color);">
                    <span style="color: var(--accent-color);">></span> ${query}
                </div>
            `;
            }, 600);
        });

    </script>

</body>

</html>
